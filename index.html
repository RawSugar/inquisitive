<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Inquisitive by christhekeele</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Inquisitive</h1>
        <p class="header">Predicate methods for those curious about their Ruby datastructures.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/christhekeele/inquisitive/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/christhekeele/inquisitive/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/christhekeele/inquisitive">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/christhekeele">christhekeele</a></p>


      </header>
      <section>
        <h1>
<a name="inquisitive" class="anchor" href="#inquisitive"><span class="octicon octicon-link"></span></a>Inquisitive</h1>

<blockquote>
<p><strong>Predicate methods for those curious about their datastructures.</strong></p>
</blockquote>

<p>Inquisitive provides String, Array, and Hash subclasses with dynamic predicate methods that allow you to interrogate the most common Ruby datastructures in a readable, friendly fashion. It's the inevitable evolution of ActiveSupport's <code>StringInquirer</code>.</p>

<p>It also allows you to auto-instanciate and read inquisitive datastructures straight from your <code>ENV</code> hash through the <code>Inquisitive::Environment</code> module.</p>

<p>Inquisitive will try to use ActiveSupport's <code>HashWithIndifferentAccess</code>, but if that cannot be found it will bootstrap itself with a minimal, well-tested version extracted from ActiveSupport 4.0.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>To add to your project:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"gem 'inquisitive'"</span> &gt;&gt; Gemfile
<span class="nv">$ </span>bundle install
</pre></div>

<p>Otherwise:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>gem install inquisitive
</pre></div>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a name="string" class="anchor" href="#string"><span class="octicon octicon-link"></span></a>String</h3>

<p><code>Inquisitive::String</code> tests equality:</p>

<div class="highlight highlight-ruby"><pre><span class="n">environment</span> <span class="o">=</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="nb">String</span><span class="o">.</span><span class="n">new</span> <span class="s1">'development'</span>
<span class="c1">#=&gt; "development"</span>
<span class="n">environment</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; true</span>
<span class="n">environment</span><span class="o">.</span><span class="n">not</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<h3>
<a name="array" class="anchor" href="#array"><span class="octicon octicon-link"></span></a>Array</h3>

<p><code>Inquisitive::Array</code> tests inclusion:</p>

<div class="highlight highlight-ruby"><pre><span class="n">supported_databases</span> <span class="o">=</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="nb">Array</span><span class="o">.</span><span class="n">new</span> <span class="sx">%w[mysql postgres sqlite]</span>
<span class="c1">#=&gt; ["mysql", "postgres", "sqlite"]</span>
<span class="n">supported_databases</span><span class="o">.</span><span class="n">postgres?</span>
<span class="c1">#=&gt; true</span>
<span class="n">supported_databases</span><span class="o">.</span><span class="n">sql_server?</span>
<span class="c1">#=&gt; false</span>
<span class="n">supported_databases</span><span class="o">.</span><span class="n">exclude</span><span class="o">.</span><span class="n">sql_server?</span>
<span class="c1">#=&gt; true</span>
</pre></div>

<h3>
<a name="hash" class="anchor" href="#hash"><span class="octicon octicon-link"></span></a>Hash</h3>

<p><code>Inquisitive::Hash</code> provides struct-like access to its values, wrapped in other inquisitive objects:</p>

<div class="highlight highlight-ruby"><pre><span class="n">stubbed</span> <span class="o">=</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">authentication</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="k">in</span><span class="p">:</span> <span class="s1">'development'</span><span class="p">,</span>
  <span class="ss">services</span><span class="p">:</span> <span class="sx">%w[database api]</span><span class="p">,</span>
  <span class="ss">ignorable</span><span class="p">:</span> <span class="p">{</span> <span class="ss">junk</span><span class="p">:</span> <span class="o">[</span> <span class="s2">""</span> <span class="o">]</span> <span class="p">}</span>
<span class="p">)</span>
<span class="c1">#=&gt; {"authentication"=&gt;true,</span>
<span class="c1">#=&gt;  "in"=&gt;"development",</span>
<span class="c1">#=&gt;  "services"=&gt;["database", "api"],</span>
<span class="c1">#=&gt;  "ignorable"=&gt;{"junk"=&gt;[""]}}</span>

<span class="n">stubbed</span><span class="o">.</span><span class="n">authentication?</span>
<span class="c1">#=&gt; true</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">registration?</span>
<span class="c1">#=&gt; false</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">services?</span>
<span class="c1">#=&gt; true</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">ignorable?</span>
<span class="c1">#=&gt; false</span>

<span class="n">stubbed</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; true</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">production?</span>
<span class="c1">#=&gt; false</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">database?</span>
<span class="c1">#=&gt; true</span>
<span class="n">stubbed</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">sidekiq?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<p><code>Inquisitive::Hash</code> also allows negation with the <code>no</code> method:</p>

<div class="highlight highlight-ruby"><pre><span class="n">config</span> <span class="o">=</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">database</span><span class="p">:</span> <span class="s1">'postgres'</span><span class="p">)</span>
<span class="c1">#=&gt; {"database"=&gt;"postgres"}</span>

<span class="n">config</span><span class="o">.</span><span class="n">database?</span>
<span class="c1">#=&gt; true</span>
<span class="n">config</span><span class="o">.</span><span class="n">no</span><span class="o">.</span><span class="n">database?</span>
<span class="c1">#=&gt; false</span>
<span class="n">config</span><span class="o">.</span><span class="n">api?</span>
<span class="c1">#=&gt; false</span>
<span class="n">config</span><span class="o">.</span><span class="n">no</span><span class="o">.</span><span class="n">api?</span>
<span class="c1">#=&gt; true</span>
</pre></div>

<h3>
<a name="inquisitive-environment" class="anchor" href="#inquisitive-environment"><span class="octicon octicon-link"></span></a>Inquisitive Environment</h3>

<p><code>Inquisitive::Environment</code> can be used in your modules and classes to more easily interrogate <code>ENV</code> variables with inquisitive objects:</p>

<h4>
<a name="strings" class="anchor" href="#strings"><span class="octicon octicon-link"></span></a>Strings</h4>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'ENVIRONMENT'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"development"</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'ENVIRONMENT'</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">environment</span>
<span class="c1">#=&gt; "development"</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">production?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<h4>
<a name="arrays" class="anchor" href="#arrays"><span class="octicon octicon-link"></span></a>Arrays</h4>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'SUPPORTED_DATABASES'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"mysql,postgres,sqlite"</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'SUPPORTED_DATABASES'</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">supported_databases</span>
<span class="c1">#=&gt; ["mysql", "postgres", "sqlite"]</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">supported_databases</span><span class="o">.</span><span class="n">sqlite?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">supported_databases</span><span class="o">.</span><span class="n">sql_server?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<h4>
<a name="hashes" class="anchor" href="#hashes"><span class="octicon octicon-link"></span></a>Hashes</h4>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB__AUTHENTICATION'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'true'</span>
<span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB__IN'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"development"</span>
<span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB__SERVICES'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"database,api"</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'STUB'</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">authentication?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">registration?</span>
<span class="c1">#=&gt; false</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">production?</span>
<span class="c1">#=&gt; false</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">exclude</span><span class="o">.</span><span class="n">sidekiq?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">sidekiq?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<h4>
<a name="naming" class="anchor" href="#naming"><span class="octicon octicon-link"></span></a>Naming</h4>

<p>You can name your environment inquirers with <code>:with</code>:</p>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'ENVIRONMENT'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"development"</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'ENVIRONMENT'</span><span class="p">,</span> <span class="ss">with</span><span class="p">:</span> <span class="ss">:env</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">env</span>
<span class="c1">#=&gt; "development"</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">development?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">production?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<h4>
<a name="presence" class="anchor" href="#presence"><span class="octicon octicon-link"></span></a>Presence</h4>

<p>Environment inquirers can have explicit presence checks, circumventing a common pitfall when reasoning about environment variables. Borrowing from the example above:</p>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB__AUTHENTICATION'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'false'</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'STUB'</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">authentication</span>
<span class="c1">#=&gt; "false"</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">authentication?</span>
<span class="c1">#=&gt; true</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">true?</span>
<span class="c1">#=&gt; false</span>
</pre></div>

<p>It's common to use the presence of environment variables as runtime booleans. This is frequently done by setting the environment variable to the string <code>"true"</code> when you want it to be true, and not at all otherwise. As demonstrated, this pattern can lead to ambiguity when the string is other values.</p>

<p>By default such variables will be parsed as an <code>Inquisitive::String</code>, so predicate methods will return true whatever their contents, as long as they exist. You can bind the predicate method tighter to an explicit value if you prefer:</p>

<div class="highlight highlight-ruby"><pre><span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB_AUTHENTICATION'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'false'</span>
<span class="no">ENV</span><span class="o">[</span><span class="s1">'STUB_REGISTRATION'</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'true'</span>
<span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'STUB_AUTHENTICATION'</span><span class="p">,</span> <span class="ss">present_if</span><span class="p">:</span> <span class="s1">'true'</span>
  <span class="n">inquires_about</span> <span class="s1">'STUB_REGISTRATION'</span><span class="p">,</span> <span class="ss">present_if</span><span class="p">:</span> <span class="s1">'true'</span>
<span class="k">end</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">stub_authentication</span>
<span class="c1">#=&gt; "false"</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub_authentication?</span>
<span class="c1">#=&gt; false</span>

<span class="no">MyGame</span><span class="o">.</span><span class="n">stub_registration</span>
<span class="c1">#=&gt; "true"</span>
<span class="no">MyGame</span><span class="o">.</span><span class="n">stub_registration?</span>
<span class="c1">#=&gt; true</span>
</pre></div>

<p>This only works on top-level inquirers, so there's no way to get our nested <code>MyGame.stubbed.authentication?</code> to behave as expected (currently).</p>

<p>The <code>present_if</code> check uses <code>===</code> under the covers for maximum expressiveness, so you can also use it to match against regexs, classes, and other constructs.</p>

<h4>
<a name="inquiry-mode" class="anchor" href="#inquiry-mode"><span class="octicon octicon-link"></span></a>Inquiry mode</h4>

<p>Environment inquirers have three configurable modes, defaulting to <code>:static</code>.</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">MyGame</span>
  <span class="kp">extend</span> <span class="no">Inquisitive</span><span class="o">::</span><span class="no">Environment</span>
  <span class="n">inquires_about</span> <span class="s1">'STUB'</span><span class="p">,</span> <span class="ss">mode</span><span class="p">:</span> <span class="o">%</span><span class="n">i</span><span class="o">[</span><span class="n">dynamic</span> <span class="n">lazy</span> <span class="n">static</span><span class="o">].</span><span class="n">sample</span>
<span class="k">end</span>
</pre></div>

<ul>
<li>
<p><strong>Dynamic</strong></p>

<p>Environment inquiries parse <code>ENV</code> on every invocation.</p>

<p>Use if you're manipulating the environment in between invocations, so <code>Inquisitive</code> can pick up on new values, detect changes between string or array notation, and discover new keys for hash notation.</p>
</li>
<li>
<p><strong>Lazy</strong></p>

<p>Environment inquiries check <code>ENV</code> on their first invocation, and re-use the response in future invocations.</p>

<p>Use if you're loading the module with environment inquiry methods before you've finished preparing your environment.</p>
</li>
<li>
<p><strong>Static</strong></p>

<p>Environment inquiries use the contents of <code>ENV</code> at the moment <code>inquires_about</code> was invoked.</p>

<p>Use if your application is well-behaved and doesn't go mucking around with the environment at runtime.</p>
</li>
</ul><h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-52099551-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
